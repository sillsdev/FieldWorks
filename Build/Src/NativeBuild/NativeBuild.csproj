<?xml version="1.0" encoding="utf-8"?>
<Project Sdk="Microsoft.NET.Sdk">
  <!--
    NativeBuild: SDK-style wrapper for native C++ component builds

    This project serves as a bridge between the MSBuild Traversal SDK (dirs.proj)
    and the legacy native build system (mkall.targets). It allows the traversal
    build to properly sequence native component builds before managed projects.

    The project doesn't produce any output itself - it's purely a build orchestrator.
  -->
  <PropertyGroup>
    <TargetFramework>net48</TargetFramework>
    <OutputType>Library</OutputType>
    <Platform Condition="'$(Platform)'==''">x64</Platform>
    <Configuration Condition="'$(Configuration)'==''">Debug</Configuration>
    <!-- Suppress actual compilation - this is just a build orchestrator -->
    <GenerateAssemblyInfo>false</GenerateAssemblyInfo>
    <EnableDefaultItems>false</EnableDefaultItems>
    <ProduceReferenceAssembly>false</ProduceReferenceAssembly>
    <!-- Don't produce any output assembly -->
    <CopyBuildOutputToOutputDirectory>false</CopyBuildOutputToOutputDirectory>
    <CopyOutputSymbolsToOutputDirectory>false</CopyOutputSymbolsToOutputDirectory>
  </PropertyGroup>
  <!-- Import the native build orchestration -->
  <Import Project="$(MSBuildThisFileDirectory)..\..\FwBuildTasks.targets" />
  <Import Project="$(MSBuildThisFileDirectory)..\..\SetupInclude.targets" />
  <Import Project="$(MSBuildThisFileDirectory)..\..\mkall.targets" />
  <Import Project="$(MSBuildThisFileDirectory)..\..\Windows.targets" />
  <Import Project="$(MSBuildThisFileDirectory)..\..\RegFree.targets" />
  <!-- Override the Build target to call native build instead -->
  <Target Name="Build" DependsOnTargets="allCppNoTest">
    <Message Text="Native C++ components built successfully" Importance="high" />
  </Target>
  <!-- Ensure Clean works -->
  <Target Name="Clean" DependsOnTargets="CleanAll">
    <Message Text="Native C++ components cleaned" Importance="high" />
  </Target>
</Project>
