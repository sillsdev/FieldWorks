<?xml version="1.0" encoding="utf-8"?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003" ToolsVersion="Current">

	<PropertyGroup>
		<EditorialChecksDir>$(MSBuildThisFileDirectory)..\..\..\DistFiles\Editorial Checks</EditorialChecksDir>
	</PropertyGroup>

	<Target Name="CopyScrChecksToDistFiles" AfterTargets="Build">
		<ItemGroup>
			<ScrChecksFiles Include="$(TargetPath)"/>
			<ScrChecksFiles Include="$(TargetDir)$(TargetName).pdb" Condition="Exists('$(TargetDir)$(TargetName).pdb')"/>
			<ScrChecksFiles Include="$(TargetPath).mdb" Condition="Exists('$(TargetPath).mdb')"/>
		</ItemGroup>
		<MakeDir Directories="$(EditorialChecksDir)"/>
		<Copy SourceFiles="@(ScrChecksFiles)" DestinationFolder="$(EditorialChecksDir)" OverwriteReadOnlyFiles="true"/>
		<Message Importance="high" Text="Copied ScrChecks.dll to $(EditorialChecksDir)" />
	</Target>

	<Target Name="CleanScrChecksFromDistFiles" AfterTargets="Clean">
		<ItemGroup>
			<ScrChecksCopied Include="$(EditorialChecksDir)\$(TargetName).dll"/>
			<ScrChecksCopied Include="$(EditorialChecksDir)\$(TargetName).pdb"
				Condition="Exists('$(EditorialChecksDir)\$(TargetName).pdb')"/>
			<ScrChecksCopied Include="$(EditorialChecksDir)\$(TargetName).dll.mdb"
				Condition="Exists('$(EditorialChecksDir)\$(TargetName).dll.mdb')"/>
		</ItemGroup>
		<Delete Files="@(ScrChecksCopied)" ContinueOnError="true"/>
	</Target>
</Project>
