<Project>
	<PropertyGroup>
		<!-- Suppress NU1903 security warning for DotNetZip -->
		<!-- This is a known issue with an old version; upgrade not currently feasible -->
		<NoWarn>$(NoWarn);NU1903</NoWarn>
		<!-- Default all managed projects to x64 unless explicitly overridden -->
		<PlatformTarget Condition="'$(PlatformTarget)' == ''">x64</PlatformTarget>
		<Platforms Condition="'$(Platforms)' == ''">x64</Platforms>
		<!-- Force 64-bit MSBuild host to avoid crashes loading 64-bit native DLLs in build tasks -->
		<PreferredToolArchitecture>x64</PreferredToolArchitecture>
	</PropertyGroup>
	<PropertyGroup Label="Shared Paths for Traversal Build">
		<!-- Root directory paths -->
		<FwRoot>$(MSBuildThisFileDirectory)</FwRoot>
		<FwDistFiles>$(FwRoot)DistFiles\</FwDistFiles>
		<FwOutput>$(FwRoot)Output\</FwOutput>
		<FwOutputBase>$(FwOutput)$(Configuration)\</FwOutputBase>
		<FwObj>$(FwRoot)Obj\</FwObj>
		<!-- LCM artifacts directory -->
		<DownloadsDir Condition="'$(DownloadsDir)'==''">$(FwRoot)Downloads</DownloadsDir>
		<LcmArtifactsDir Condition="'$(LcmArtifactsDir)'==''">$(DownloadsDir)</LcmArtifactsDir>
		<!-- Enable binding redirects for all projects -->
		<AutoGenerateBindingRedirects>true</AutoGenerateBindingRedirects>
		<GenerateBindingRedirectsOutputType>true</GenerateBindingRedirectsOutputType>
	</PropertyGroup>
	<ItemGroup>
		<Compile Remove="**/*.template.cs" />
	</ItemGroup>
	<!-- Modern test infrastructure for all test projects -->
	<PropertyGroup Condition="'$(IsTestProject)' == 'true'">
		<!-- For .NET Framework projects, ensure NuGet package assemblies are copied to output directory -->
		<!-- This is required for dotnet test to discover test adapters -->
		<CopyLocalLockFileAssemblies>true</CopyLocalLockFileAssemblies>
	</PropertyGroup>
	<ItemGroup Condition="'$(IsTestProject)' == 'true'">
		<!-- Microsoft.NET.Test.Sdk enables 'dotnet test' support (VSTest platform) -->
		<PackageReference Include="Microsoft.NET.Test.Sdk" Version="17.11.1" />
		<!-- NUnit3TestAdapter enables NUnit test discovery for VSTest -->
		<PackageReference Include="NUnit3TestAdapter" Version="5.2.0" />
	</ItemGroup>
</Project>
